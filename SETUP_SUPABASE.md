# üöÄ Configuration Supabase - GUIDE RAPIDE

## ‚úÖ √âtape 1 : SQL D√âJ√Ä COPI√â !
Le code SQL est **d√©j√† dans votre presse-papier** (CMD+V pour coller).

## ‚úÖ √âtape 2 : Navigateur ouvert
Le SQL Editor de Supabase vient de s'ouvrir dans votre navigateur.

## üìù √âtape 3 : ACTIONS √Ä FAIRE (30 secondes)

### Dans le navigateur qui vient de s'ouvrir :

1. **Si vous n'√™tes pas connect√©** ‚Üí Connectez-vous avec votre compte Supabase

2. **Une fois dans le SQL Editor** :
   - Collez le SQL (CMD+V ou CTRL+V)
   - Cliquez sur le bouton vert **"RUN"** en bas √† droite

3. **V√©rification** :
   - Vous devriez voir "Success!" ou "0 rows returned"
   - Si erreur "table already exists" ‚Üí C'est bon, la table existe d√©j√† !

## üéØ R√©sultat Attendu

Apr√®s avoir cliqu√© sur RUN, votre base de donn√©es aura :
- ‚úÖ Table `activation_codes` cr√©√©e
- ‚úÖ 5 codes initiaux ajout√©s (AKOHO2024, TANTSAHA2024, etc.)
- ‚úÖ S√©curit√© RLS activ√©e
- ‚úÖ Politiques d'acc√®s configur√©es

## üß™ Test Final

Pour v√©rifier que tout fonctionne :

```bash
flutter run -d emulator-5554
```

Puis dans l'app :
1. Tapez le code admin : **ARIELHAVANA2024**
2. Vous devriez voir un indicateur **VERT** "Base de donn√©es connect√©e (S√©curis√©)"

---

## üìã Code SQL (au cas o√π le clipboard ne fonctionne pas)

```sql
-- Cr√©ation de la table pour les codes d'activation
create table public.activation_codes (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  code text not null unique,
  is_used boolean default false,
  used_at timestamp with time zone,
  device_info text
);

-- Activer la s√©curit√© RLS (Row Level Security)
alter table public.activation_codes enable row level security;

-- Politique : Tout le monde peut lire les codes (pour v√©rifier s'ils sont valides)
create policy "Enable read access for all users"
on public.activation_codes for select
using (true);

-- Politique : Tout le monde peut mettre √† jour un code (pour le marquer comme utilis√©)
create policy "Enable update for all users"
on public.activation_codes for update
using (true)
with check (true);

-- Politique : Tout le monde peut ins√©rer des codes (pour que l'admin puisse en cr√©er depuis l'app)
create policy "Enable insert for all users"
on public.activation_codes for insert
with check (true);

-- Ins√©rer quelques codes de test initiaux
insert into public.activation_codes (code, is_used)
values 
  ('AKOHO2024', false),
  ('TANTSAHA2024', false),
  ('MALAGASY2024', false),
  ('VOKATRA2024', false),
  ('FAMBOLENA2024', false);
```

---

**Note** : Si vous voyez une erreur "already exists", c'est que la table a d√©j√† √©t√© cr√©√©e. Vous pouvez ignorer cette erreur ou supprimer la table d'abord avec :

```sql
DROP TABLE IF EXISTS public.activation_codes CASCADE;
```

Puis relancer le script complet.
